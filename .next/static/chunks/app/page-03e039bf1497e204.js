(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6027:(e,s,t)=>{Promise.resolve().then(t.bind(t,7167))},7167:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>er});var a=t(5155),r=t(7016),i=t(5695),n=t(2115),l=t(4761),d=t(5295);let c=t(3312).dp;var o=t(2596),m=t(9688);function x(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,m.QP)((0,o.$)(s))}function u(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:x("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function h(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:x("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-[data-slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function f(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:x("px-6",s),...t})}function p(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:x("flex items-center px-6 [.border-t]:pt-6",s),...t})}var v=t(5977);function g(e){let{className:s,...t}=e;return(0,a.jsx)(v.bL,{"data-slot":"avatar",className:x("relative flex size-8 shrink-0 overflow-hidden rounded-full",s),...t})}function j(e){let{className:s,...t}=e;return(0,a.jsx)(v._V,{"data-slot":"avatar-image",className:x("aspect-square size-full",s),...t})}function N(e){let{className:s,...t}=e;return(0,a.jsx)(v.H4,{"data-slot":"avatar-fallback",className:x("bg-muted flex size-full items-center justify-center rounded-full",s),...t})}var b=t(9708),w=t(2085);let y=(0,w.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function k(e){let{className:s,variant:t,size:r,asChild:i=!1,...n}=e,l=i?b.DX:"button";return(0,a.jsx)(l,{"data-slot":"button",className:x(y({variant:t,size:r,className:s})),...n})}var I=t(5494),_=t(2318);function z(e){let{className:s,...t}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:x("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}var C=t(2486);function S(){var e;let{user:s}=(0,d.Jd)(),[t,r]=(0,n.useState)(""),[i,o]=(0,n.useState)(!1),m=(0,l.n_)(c.posts.create),x=async e=>{if(e.preventDefault(),s&&t.trim())try{o(!0),await m({authorId:s.id,content:t.trim()}),r("")}catch(e){console.error("Failed to create post:",e)}finally{o(!1)}};return s?(0,a.jsx)(u,{className:"mb-8",children:(0,a.jsxs)("form",{onSubmit:x,children:[(0,a.jsx)(f,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)(g,{children:[(0,a.jsx)(j,{src:s.imageUrl,alt:s.fullName||""}),(0,a.jsx)(N,{children:(null===(e=s.firstName)||void 0===e?void 0:e.substring(0,1))||"U"})]}),(0,a.jsx)(z,{placeholder:"What's on your mind?",value:t,onChange:e=>r(e.target.value),className:"flex-1 resize-none",rows:3})]})}),(0,a.jsx)(p,{className:"flex justify-end border-t pt-4",children:(0,a.jsxs)(k,{type:"submit",disabled:!t.trim()||i,children:[i?"Posting...":"Post",(0,a.jsx)(C.A,{className:"ml-2 h-4 w-4"})]})})]})}):null}var A=t(1976);function U(e){let{postId:s,likes:t,className:r=""}=e,{user:i}=(0,d.Jd)(),[o,m]=(0,n.useState)(t),[x,u]=(0,n.useState)(!1),h=(0,l.n_)(c.likes.create),f=!!i&&o.includes(i.id),p=async()=>{if(i)try{u(!0),f?m(o.filter(e=>e!==i.id)):m([...o,i.id]),await h({postId:s,userId:i.id})}catch(e){console.error("Failed to like post:",e),m(t)}finally{u(!1)}};return(0,a.jsxs)(k,{variant:"ghost",size:"sm",onClick:p,disabled:x||!i,className:"text-muted-foreground hover:text-primary ".concat(r),children:[(0,a.jsx)(A.A,{className:"h-4 w-4 mr-1 transition-all ".concat(f?"fill-primary text-primary":"")}),o.length]})}var F=t(1366),T=t(7863),J=t(6474),D=t(429);function P(e){var s;let{postId:t,onCommentAdded:r}=e,{user:i}=(0,d.Jd)(),[o,m]=(0,n.useState)(""),[x,u]=(0,n.useState)(!1),h=(0,l.n_)(c.comments.create),f=async e=>{if(e.preventDefault(),i&&o.trim())try{u(!0),await h({postId:t,authorId:i.id,content:o.trim(),parentId:void 0}),m(""),null==r||r()}catch(e){console.error("Failed to add comment:",e)}finally{u(!1)}};return i?(0,a.jsxs)("form",{onSubmit:f,className:"flex items-start gap-2 pt-2",children:[(0,a.jsxs)(g,{className:"h-8 w-8 mt-1",children:[(0,a.jsx)(j,{src:i.imageUrl,alt:i.fullName||""}),(0,a.jsx)(N,{children:(null===(s=i.firstName)||void 0===s?void 0:s.substring(0,1))||"U"})]}),(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(z,{placeholder:"Add a comment...",value:o,onChange:e=>m(e.target.value),className:"min-h-[60px] pr-10 resize-none",rows:1}),(0,a.jsx)(k,{type:"submit",size:"icon",variant:"ghost",className:"absolute right-2 top-2",disabled:!o.trim()||x,children:(0,a.jsx)(D.A,{className:"h-5 w-5"})})]})]}):null}function E(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"skeleton",className:x("bg-accent animate-pulse rounded-md",s),...t})}var L=t(757),O=t(1497);function R(e){let{commentId:s,likes:t,className:r="",size:i="sm"}=e,{user:o}=(0,d.Jd)(),[m,x]=(0,n.useState)(t),[u,h]=(0,n.useState)(!1),f=(0,l.n_)(c.comments.toggleLike),p=!!o&&m.includes(o.id),v=async()=>{if(o)try{h(!0),p?x(m.filter(e=>e!==o.id)):x([...m,o.id]),await f({commentId:s,userId:o.id})}catch(e){console.error("Failed to like comment:",e),x(t)}finally{h(!1)}};return(0,a.jsxs)(k,{variant:"ghost",size:"sm",onClick:v,disabled:u||!o,className:"text-muted-foreground hover:text-primary ".concat("xs"===i?"text-xs py-0 px-1 h-6":"text-sm py-1 px-2"," ").concat(r),children:[(0,a.jsx)(A.A,{className:"".concat("xs"===i?"h-3 w-3":"h-4 w-4"," mr-1 transition-all ").concat(p?"fill-primary text-primary":"")}),m.length>0&&m.length]})}var V=t(4416);function B(e){var s;let{postId:t,parentId:r,onReplyAdded:i,onCancel:o}=e,{user:m}=(0,d.Jd)(),[x,u]=(0,n.useState)(""),[h,f]=(0,n.useState)(!1),p=(0,l.n_)(c.comments.create),v=async e=>{if(e.preventDefault(),m&&x.trim())try{f(!0),await p({postId:t,authorId:m.id,content:x.trim(),parentId:r}),u(""),null==i||i()}catch(e){console.error("Failed to add reply:",e)}finally{f(!1)}};return m?(0,a.jsxs)("form",{onSubmit:v,className:"flex items-start gap-2 pt-2 pl-6 mt-1",children:[(0,a.jsxs)(g,{className:"h-6 w-6 mt-1",children:[(0,a.jsx)(j,{src:m.imageUrl,alt:m.fullName||""}),(0,a.jsx)(N,{children:(null===(s=m.firstName)||void 0===s?void 0:s.substring(0,1))||"U"})]}),(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(z,{placeholder:"Write a reply...",value:x,onChange:e=>u(e.target.value),className:"min-h-[40px] text-sm pr-16 resize-none",rows:1}),(0,a.jsxs)("div",{className:"absolute right-2 top-2 flex gap-1",children:[(0,a.jsx)(k,{type:"button",size:"icon",variant:"ghost",className:"h-6 w-6",onClick:o,children:(0,a.jsx)(V.A,{className:"h-4 w-4"})}),(0,a.jsx)(k,{type:"submit",size:"icon",variant:"ghost",className:"h-6 w-6",disabled:!x.trim()||h,children:(0,a.jsx)(D.A,{className:"h-4 w-4"})})]})]})]}):null}function H(e){let{comment:s,postId:t,users:r,level:i=0}=e,[d,o]=(0,n.useState)(!1),[m,x]=(0,n.useState)(0===i),u=(0,l.IT)(c.comments.listReplies,m?{parentId:s._id}:"skip")||[],h=r.find(e=>e.clerkId===s.authorId),f=s.replyCount&&s.replyCount>0;return(0,a.jsxs)("div",{className:"flex gap-2 ".concat(i>0?"mt-3":""),children:[(0,a.jsx)(g,{className:i>0?"h-6 w-6":"h-8 w-8",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j,{src:h.imageUrl,alt:h.name}),(0,a.jsx)(N,{children:h.name.substring(0,2)})]}):(0,a.jsx)(N,{children:(0,a.jsx)(E,{className:i>0?"h-6 w-6":"h-8 w-8","rounded-full":!0})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsx)("span",{className:"font-medium ".concat(i>0?"text-xs":"text-sm"),children:(null==h?void 0:h.name)||"Unknown"}),(0,a.jsx)("span",{className:"text-muted-foreground ".concat("text-xs"),children:(0,L.m)(new Date(s._creationTime),{addSuffix:!0})})]}),(0,a.jsx)("p",{className:i>0?"text-xs":"text-sm",children:s.content}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)(R,{commentId:s._id,likes:s.likes||[],size:i>0?"xs":"sm"}),i<3&&(0,a.jsxs)(k,{variant:"ghost",size:"sm",onClick:()=>{o(!0),x(!0)},className:"text-muted-foreground hover:text-primary ".concat(i>0?"text-xs py-0 px-1 h-6":"text-sm"),children:[(0,a.jsx)(O.A,{className:i>0?"h-3 w-3 mr-1":"h-4 w-4 mr-1"}),"Reply"]}),f&&(0,a.jsx)(k,{variant:"ghost",size:"sm",onClick:()=>{x(!m)},className:"text-muted-foreground hover:text-primary ".concat(i>0?"text-xs py-0 px-1 h-6":"text-sm"),children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.A,{className:i>0?"h-3 w-3 mr-1":"h-4 w-4 mr-1"}),"Hide replies"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J.A,{className:i>0?"h-3 w-3 mr-1":"h-4 w-4 mr-1"}),"Show ",s.replyCount," ",1===s.replyCount?"reply":"replies"]})})]}),d&&(0,a.jsx)(B,{postId:t,parentId:s._id,onReplyAdded:()=>{o(!1)},onCancel:()=>o(!1)}),m&&u.length>0&&(0,a.jsx)("div",{className:"space-y-0 pl-2 border-l-2 border-muted ml-1 mt-2",children:u.map(e=>(0,a.jsx)(H,{comment:e,postId:t,users:r,level:i+1},e._id))})]})]})}function W(e){let{postId:s}=e,[t,r]=(0,n.useState)(!1),[i,d]=(0,n.useState)(!1),o=(0,l.IT)(c.comments.listByPost,{postId:s})||[],m=(0,l.IT)(c.users.list)||[],x=o.filter(e=>!e.parentId),u=o.length;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(k,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-primary",onClick:()=>{r(!t),t||i||d(!0)},children:[(0,a.jsx)(F.A,{className:"h-4 w-4 mr-1"}),u," ",1===u?"Comment":"Comments",t?(0,a.jsx)(T.A,{className:"h-4 w-4 ml-1"}):(0,a.jsx)(J.A,{className:"h-4 w-4 ml-1"})]}),!i&&(0,a.jsx)(k,{variant:"ghost",size:"sm",onClick:()=>{d(!0),r(!0)},children:"Add comment"})]}),t&&(0,a.jsxs)("div",{className:"space-y-4 mt-2",children:[x.length>0&&(0,a.jsx)("div",{className:"space-y-4",children:x.map(e=>(0,a.jsx)(H,{comment:e,postId:s,users:m},e._id))}),i&&(0,a.jsx)(P,{postId:s,onCommentAdded:()=>d(!1)})]})]})}function X(){let{user:e,isLoaded:s}=(0,d.Jd)(),t=(0,l.IT)(c.posts.list)||[],r=(0,l.IT)(c.users.list)||[],i=(0,l.n_)(c.users.create),o=(0,l.n_)(c.users.toggleFollow);(0,n.useEffect)(()=>{s&&e&&i({clerkId:e.id,name:e.fullName||"".concat(e.firstName||""," ").concat(e.lastName||"").trim(),username:e.username||e.id.substring(0,8),imageUrl:e.imageUrl||"/placeholder.svg?height=40&width=40"})},[s,e,i]);let m=r.filter(s=>s.clerkId!==(null==e?void 0:e.id)),x=async s=>{e&&await o({followerId:e.id,followingId:s})},v=s=>{var t;let a=r.find(s=>s.clerkId===(null==e?void 0:e.id));return(null==a?void 0:null===(t=a.following)||void 0===t?void 0:t.includes(s))||!1};return s?(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(S,{}),(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"People to follow"}),0===m.length?(0,a.jsx)(u,{children:(0,a.jsx)(f,{className:"p-6 text-center text-muted-foreground",children:"No other users to follow yet."})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(e=>(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{className:"flex flex-row items-center gap-4 pb-2",children:[(0,a.jsxs)(g,{children:[(0,a.jsx)(j,{src:e.imageUrl,alt:e.name}),(0,a.jsx)(N,{children:e.name.substring(0,2)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["@",e.username]})]})]}),(0,a.jsx)(p,{children:(0,a.jsx)(k,{variant:v(e.clerkId)?"outline":"default",size:"sm",className:"w-full",onClick:()=>x(e.clerkId),children:v(e.clerkId)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.A,{className:"h-4 w-4 mr-2"}),"Unfollow"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Follow"]})})})]},e._id))})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Latest Posts"}),(0,a.jsx)("div",{className:"space-y-4",children:0===t.length?(0,a.jsx)(u,{children:(0,a.jsx)(f,{className:"p-6 text-center text-muted-foreground",children:"No posts yet. Be the first to share something!"})}):t.map(e=>{var s;let t=r.find(s=>s.clerkId===e.authorId);return(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{className:"flex flex-row items-center gap-4 pb-2",children:[(0,a.jsxs)(g,{children:[(0,a.jsx)(j,{src:null==t?void 0:t.imageUrl,alt:null==t?void 0:t.name}),(0,a.jsx)(N,{children:(null==t?void 0:null===(s=t.name)||void 0===s?void 0:s.substring(0,2))||"U"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium",children:null==t?void 0:t.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["@",null==t?void 0:t.username]})]})]}),(0,a.jsx)(f,{children:(0,a.jsx)("p",{children:e.content})}),(0,a.jsxs)(p,{className:"flex flex-col items-start",children:[(0,a.jsx)("div",{className:"flex items-center w-full",children:(0,a.jsx)(U,{postId:e._id,likes:e.likes||[]})}),(0,a.jsx)(W,{postId:e._id})]})]},e._id)})})]})]}):(0,a.jsx)(q,{})}function q(){return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(u,{children:(0,a.jsx)(f,{className:"p-6",children:(0,a.jsx)(E,{className:"h-24 w-full"})})}),(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)(E,{className:"h-10 w-48 mb-4"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{className:"flex flex-row items-center gap-4 pb-2",children:[(0,a.jsx)(E,{className:"h-10 w-10 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(E,{className:"h-4 w-24"}),(0,a.jsx)(E,{className:"h-3 w-16"})]})]}),(0,a.jsx)(p,{children:(0,a.jsx)(E,{className:"h-9 w-full"})})]},e))})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)(E,{className:"h-10 w-36 mb-4"}),(0,a.jsx)("div",{className:"space-y-4",children:[1,2].map(e=>(0,a.jsxs)(u,{children:[(0,a.jsxs)(h,{className:"flex flex-row items-center gap-4 pb-2",children:[(0,a.jsx)(E,{className:"h-10 w-10 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(E,{className:"h-4 w-24"}),(0,a.jsx)(E,{className:"h-3 w-16"})]})]}),(0,a.jsx)(f,{children:(0,a.jsx)(E,{className:"h-16 w-full"})}),(0,a.jsx)(p,{children:(0,a.jsx)(E,{className:"h-8 w-16"})})]},e))})]})]})}var M=t(6874),Q=t.n(M),Z=t(3861),$=t(3440);function G(e){let{...s}=e;return(0,a.jsx)($.bL,{"data-slot":"popover",...s})}function K(e){let{...s}=e;return(0,a.jsx)($.l9,{"data-slot":"popover-trigger",...s})}function Y(e){let{className:s,align:t="center",sideOffset:r=4,...i}=e;return(0,a.jsx)($.ZL,{children:(0,a.jsx)($.UC,{"data-slot":"popover-content",align:t,sideOffset:r,className:x("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",s),...i})})}let ee=(0,w.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/70",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function es(e){let{className:s,variant:t,asChild:r=!1,...i}=e,n=r?b.DX:"span";return(0,a.jsx)(n,{"data-slot":"badge",className:x(ee({variant:t}),s),...i})}function et(){let{user:e}=(0,d.Jd)(),[s,t]=(0,n.useState)(!1),r=(0,l.IT)(c.notifications.list,{userId:(null==e?void 0:e.id)||""})||[],i=(0,l.IT)(c.users.list)||[],o=(0,l.n_)(c.notifications.markAsRead),m=(0,l.n_)(c.notifications.markAllAsRead),x=r.filter(e=>!e.read).length;(0,n.useEffect)(()=>{s&&x>0&&r.filter(e=>!e.read).forEach(e=>{o({notificationId:e._id})})},[s,r,x,o]);let u=(0,n.useCallback)(async()=>{(null==e?void 0:e.id)&&await m({userId:e.id})},[null==e?void 0:e.id,m]),h=e=>i.find(s=>s.clerkId===e),f=e=>{let s=h(e.actorId),t=(null==s?void 0:s.name)||"Someone";switch(e.type){case"follow":return"".concat(t," started following you");case"like":return"".concat(t," liked your post");case"comment":return"".concat(t," commented on your post");case"reply":return"".concat(t," replied to your comment");case"comment_like":return"".concat(t," liked your comment");default:return e.content}};return(0,a.jsxs)(G,{open:s,onOpenChange:t,children:[(0,a.jsx)(K,{asChild:!0,children:(0,a.jsxs)(k,{variant:"ghost",size:"icon",className:"relative",children:[(0,a.jsx)(Z.A,{className:"h-5 w-5"}),x>0&&(0,a.jsx)(es,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:x})]})}),(0,a.jsxs)(Y,{className:"w-80 p-0",align:"end",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,a.jsx)("h3",{className:"font-medium",children:"Notifications"}),x>0&&(0,a.jsx)(k,{variant:"ghost",size:"sm",onClick:u,children:"Mark all as read"})]}),(0,a.jsx)("div",{className:"max-h-80 overflow-y-auto",children:0===r.length?(0,a.jsx)("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications yet"}):(0,a.jsx)("div",{className:"divide-y",children:r.map(e=>{let s=h(e.actorId);return(0,a.jsx)("div",{className:"p-4 hover:bg-muted/50 ".concat(e.read?"":"bg-muted/20"),children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(g,{className:"h-8 w-8",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j,{src:s.imageUrl,alt:s.name}),(0,a.jsx)(N,{children:s.name.substring(0,2)})]}):(0,a.jsx)(N,{children:(0,a.jsx)(E,{className:"h-8 w-8 rounded-full"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm",children:f(e)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:(0,L.m)(new Date(e._creationTime),{addSuffix:!0})})]})]})},e._id)})})})]})]})}function ea(){let{isSignedIn:e}=(0,d.Jd)();return(0,a.jsx)("header",{className:"border-b",children:(0,a.jsxs)("div",{className:"container max-w-5xl mx-auto flex items-center justify-between h-16 px-4",children:[(0,a.jsx)(Q(),{href:"/",className:"font-bold text-xl",children:"SocialApp"}),e?(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(et,{}),(0,a.jsx)(d.uF,{afterSignOutUrl:"/"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k,{variant:"outline",asChild:!0,children:(0,a.jsx)(Q(),{href:"/sign-in",children:"Sign In"})}),(0,a.jsx)(k,{asChild:!0,children:(0,a.jsx)(Q(),{href:"/sign-up",children:"Sign Up"})})]})]})})}function er(){let{userId:e}=(0,r.d)();return e||(0,i.redirect)("/sign-in"),(0,a.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,a.jsx)(ea,{}),(0,a.jsx)("main",{className:"flex-1 container max-w-5xl mx-auto py-6 px-4",children:(0,a.jsx)(X,{})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[426,355,778,441,684,358],()=>s(6027)),_N_E=e.O()}]);